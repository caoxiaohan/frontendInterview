/*
 * utils(v1.0)：Set up a utils namespace, and add the method used in the project to the namespace to avoid contamination of global variables.
 * by team on 2015/09/29
 */
var utils={win:function(a,b){var c=arguments.length;if(0!==c){if(1===c)return document.documentElement[a]||document.body[a];document.documentElement[a]=b,document.body[a]=b}},listToArray:function(a){var d,b=[];try{b=Array.prototype.slice.call(a,0)}catch(c){for(d=0;d<a.length;d++)b[b.length]=a[d]}return b},toJSON:function(jsonStr){return"JSON"in window?JSON.parse(jsonStr):eval("("+jsonStr+")")}};utils.getElementsByClass=function(a,b){var c,d,e,f,g,h,i,j;if(b=b||document,"getElementsByClassName"in b)return this.listToArray(b.getElementsByClassName(a));for(c=a.replace(/^\s+|\s+$/g,"").split(/\s+/),d=b.getElementsByTagName("*"),e=[],f=0;f<d.length;f++){for(g=d[f],h=!0,i=0;i<c.length;i++)if(j=new RegExp("(^| +)"+c[i]+"( +|$)"),!j.test(g.className)){h=!1;break}h?e[e.length]=g:null}return e},utils.children=function(a,b){var e,f,c=[],d=a.childNodes;for(e=0;e<d.length;e++)f=d[e],1===f.nodeType?"undefined"==typeof b?c[c.length]=f:f.nodeName.toLowerCase()===b.toLowerCase()?c[c.length]=f:null:null;return c},utils.prev=function(a){if("previousElementSibling"in a)return a.previousElementSibling;for(var b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},utils.next=function(a){if("nextElementSibling"in a)return a.nextElementSibling;for(var b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},utils.sibling=function(a){var b=this.prev(a),c=this.next(a),d=[];return b?d[d.length]=b:null,c?d[d.length]=c:null,d},utils.prevAll=function(a){for(var b=[],c=this.prev(a);c;)b.unshift(c),c=this.prev(c);return b},utils.nextAll=function(a){for(var b=[],c=this.next(a);c;)b[b.length]=c,c=this.next(c);return b},utils.siblings=function(a){return this.prevAll(a).concat(this.nextAll(a))},utils.getIndex=function(a){return this.prevAll(a).length},utils.first=function(a,b){var c=this.children(a,b);return c.length>0?c[0]:null},utils.last=function(a,b){var c=this.children(a,b);return c.length>0?c[c.length-1]:null},utils.attr=function(a,b,c){var d=arguments.length;if(!(1>=d))return 2===d?"class"===b?a.className:a.getAttribute(b):("class"===b?a.className=c:a.setAttribute(b,c),void 0)},utils.removeAttr=function(a,b){var c=arguments.length;1>=c||("class"===b?a.className=null:a.removeAttribute(b))},utils.getCss=function(a,b){var c="getComputedStyle"in window?window.getComputedStyle(a,null)[b]:a.currentStyle[b],d=parseFloat(c);return isNaN(d)?c:d},utils.setCss=function(a,b,c){var d=/^(width|height|top|left|right|bottom|((margin|padding)(Left|Top|Right|Bottom)?))$/;"opacity"===b?(a["style"]["opacity"]=c,a["style"]["filter"]="alpha(opacity="+100*c+")"):a["style"][b]=d.test(b)?/^[+-]?(\d|[1-9]\d+)(\.\d+)?$/.test(c)?c+"px":c:c},utils.setGroupCss=function(a,b){if("[object Object]"==={}.toString.call(b))for(var c in b)b.hasOwnProperty(c)&&this.setCss(a,c,b[c])},utils.offset=function(a,b){for(var c=a.offsetLeft,d=a.offsetTop,e=a.offsetParent;e;)c+=e.offsetLeft,d+=e.offsetTop,navigator.userAgent.indexOf("MSIE 8.0")<=-1&&(c+=e.clientLeft,d+=e.clientTop),e=e.offsetParent;return"left"===b?c:d},utils.hasClass=function(a,b){var c=a.className,d=new RegExp("(^| +)"+b+"( +|$)");return d.test(c)},utils.addClass=function(a,b){var d,e,c=b.replace(/^\s+|\s+$/g,"").split(/\s+/);for(d=0;d<c.length;d++)e=c[d],this.hasClass(a,e)||(a.className+=" "+e)},utils.removeClass=function(a,b){var d,e,f,c=b.replace(/^\s+|\s+$/g,"").split(/\s+/);for(d=0;d<c.length;d++)e=c[d],f=new RegExp("(^| +)"+e+"( +|$)","g"),this.hasClass(a,e)&&(a.className=a.className.replace(f," "))},utils.html=function(a,b){var c=arguments.length;if(0!==c)return 1===c?a.innerHTML:(a.innerHTML=b,void 0)},utils.val=function(a,b){var c=arguments.length;if(0!==c)return 1===c?a.value:(a.value=b,void 0)},utils.prepend=function(a,b){var c=this.first(b);c?b.insertBefore(a,c):b.appendChild(a)},utils.insertAfter=function(a,b){var c=this.next(b),d=b.parentNode;c?d.insertBefore(a,c):d.appendChild(a)},~function(a){var d,b={isNum:"Number",isStr:"String",isBoo:"Boolean",isNul:"Null",isUnd:"Undefined",isObj:"Object",isAry:"Array",isFun:"Function",isReg:"RegExp",isDate:"Date"},c=function(){var a=arguments[0];return function(){var b=arguments[0],c=new RegExp("^\\[object "+a+"\\]$","i");return c.test(Object.prototype.toString.call(b))}};for(d in b)b.hasOwnProperty(d)&&(a[d]=c(b[d]))}(utils),~function(){var aryPro=Array.prototype,strPro=String.prototype,regPro=RegExp.prototype;aryPro.unique=function(){var b,c,a={};for(b=0;b<this.length;b++)c=this[b],a[c]==c?(this[b]=this[this.length-1],this.length-=1,b--):a[c]=c;return a=null,this},aryPro.myForEach=function(a,b){if(Array.prototype.forEach)return this.forEach(a,b);for(var c=0;c<this.length;c++)a.call(b,this[c],c,this)},aryPro.myMap=function(a,b){if(Array.prototype.map)return this.map(a,b);for(var c=0;c<this.length;c++)this[c]=a.call(b,this[c],c,this);return this},strPro.myTrim=function(){return this.replace(/(^\s+|\s+$)/g,"")},strPro.mySub=function(){var e,f,a=arguments[0]||10,b=arguments[1]||!1,c="",d=0;for(e=0;e<this.length;e++){if(f=this.charAt(e),/[\u4e00-\u9fa5]/.test(f)?d+=2:d++,d>a){b?c+="...":void 0;break}c+=f}return c},strPro.myFormatTime=function(){var c,a=/^(\d{4})(?:-|\/|\.|:)(\d{1,2})(?:-|\/|\.|:)(\d{1,2})(?:\s+)(\d{1,2})(?:-|\/|\.|:)(\d{1,2})(?:-|\/|\.|:)(\d{1,2})$/g,b=[];return this.replace(a,function(){b=[].slice.call(arguments).slice(1,7)}),c=arguments[0]||"{0}年{1}月{2}日 {3}:{4}:{5}",c.replace(/{(\d+)}/g,function(){var a=b[arguments[1]];return 1===a.length?"0"+a:a})},strPro.queryURLParameter=function(){var a=/([^?&=]+)=([^?&=]+)/g,b={};return this.replace(a,function(){b[arguments[1]]=arguments[2]}),b},regPro.myExec=function(str){for(var reg=this.global?this:eval(this.toString()+"g"),ary=[],res=reg.exec(str);res;)ary[ary.length]=res[0],res=reg.exec(str);return 0===ary.length?null:ary}}();