!function(t,e,n){function s(n){var s,i=n.lists,a=n.parent,o=n.cansee,r=n.cfg,c=r.seamless,l=r.scrollLen;s=n.pages=c?Math.ceil(i.length/l):n.pages;var d="scrollx"===r.effect,u=d?i.outerWidth(!0):i.outerHeight(!0),f=u*l,h=(o-l)*u,g=i.length%l,p=0===g?0:l-g,v=u*p,m=f*(s-1)-(r.allowBlank?0:v),b=0;!function(){if(c){var l,h,g,w=i.length;0!==p&&(g=d?"marginRight":"marginBottom",i.last().css(g,function(t,e){return parseInt(e)+v})),l=i.slice(-o+p).clone(!0),l.attr("data-clone",function(t){return w-(l.length-t)}),h=i.slice(0,o).clone(!0),h.attr("data-clone",function(t){return t}),i=a.prepend(l).append(h).children(),b=u*o,m=f*(s-1)+b}if("static"===a.css("position")&&a.css("position","relative"),d){var L=i.width();i.css({"float":"left",width:L}),a.css("width",u*i.length+(c?2*v:0)),1!==o||!r.doResize&&L!==e(t).width()||e(t).resize(function(){f=u=a.parent().width(),m=f*(s-1),c&&(b=u*o,m+=b),i.css("width",u),a.css("width",u*i.length),n.process(n.old,n.old,"must")})}}(),n.init(function(t,e,i){var g,p,v="must"===i?0:r.duration;if(c){var w=d?"left":"top";0===t&&e===s-1&&"next"===i?a.css(w,-h):t===s-1&&0===e&&"prev"===i&&a.css(w,-m-b+(o-l)*u)}g=t===s-1?m:f*t+b,p=d?{left:-g}:{top:-g},a.stop().animate(p,v,r.easing,function(){n.done()})})}function i(t){var e=t.lists,n=t.cfg,s=n.effect,i=n.easing,a=n.scrollLen,o=function(){t.done()};"fade"===s?("static"===t.parent.css("position")&&t.parent.css("position","relative"),"absolute"!==e.css("position")&&e.css({position:"absolute",left:0,top:0}),e.hide().eq(t.cur).show(),t.init(function(t,s,a){var r="must"===a?0:n.duration;e.eq(s).stop(!0,!0).css("z-index",1).fadeOut(r,i,o),e.eq(t).css("z-index",0).show()})):"fadeIn"===s?t.init(function(t,s,r){e.hide().slice(a*t,a*(t+1)).fadeIn("must"===r?0:n.duration,i,o)}):(n.duration=0,t.init(function(t){e.hide().slice(a*t,a*(t+1)).show(),o()}))}function a(t,s,i){"function"==typeof s&&(i=s,s=n),this.ele=e(t),this.cfg=e.extend({},a.config,s),"function"==typeof i&&(this.callback=i),this.valid=!0,this.predefine()}function o(t,e){for(var n="",s=t;e>s;s++)n+=',[data-clone="'+s+'"]';return n.substring(1)}e.fn.slide=function(t,n){return t=e.extend({easing:"swing",effect:"none"},t),this.each(function(e,o){var r=new a(o,t,n);r.valid&&(r.cfg.effect.indexOf("scroll")>=0?s(r):i(r))})},a.config={trigger:"mouseenter",tagClass:"current",btnClass:"disabled",duration:400,interval:5e3,cur:0,scrollLen:0},a.prototype={predefine:function(){var e,n,s,i,a=this,o=a.cfg,r=a.ele.find(o.lists||".j_slideLists"),c=r.parent(),l=r.children(),d=l.length,u=o.scrollLen;return n=Math.round(c.width()/l.outerWidth(!0))||1,s=Math.round(c.height()/l.outerHeight(!0))||1,e=n*s,u=o.scrollLen?u:e,i=Math.ceil((d-(e-u))/u),2>i||e>=d?(a.valid=!1,void a.init()):("ontouchstart"in t&&(o.trigger="click"),o.cur=o.cur>=i?i-1:o.cur||0,o.scrollLen=u,a.lists=l,a.parent=r,a.pages=i,a.cansee=e,void(a.old=o.cur))},init:function(t){var n,s=this,i=s.cfg,a=s.ele,o=a.find(i.tags||".j_slideTags"),r=a.find(i.posCur||".j_slideCur"),c=a.find(i.posPages||".j_slidePages"),l=a.find(i.btnPrev||".j_slidePrev"),d=a.find(i.btnNext||".j_slideNext");s.valid?(o.length&&(s.tags=o,s.bindTags()),l.length?(s.btnPrev=l,s.btnNext=d,s.bindBtns()):i.btnDisable=!1,r.length&&(s.posCur=r,c.html(s.pages)),i.auto&&s.bindAuto(),s.bindTouch(),s.process="function"==typeof t?t:e.noop,s.show(i.cur,"must"),o.add(r.parent()).add(l.parent()).show()):(o.add(r.parent()).add(l.parent()).remove(),i.lazyload&&(n=i.imgAttr||"data-slide-img",s.doLoadImg(e("["+n+"]"),n)))},rewriteTags:function(){var t=this,n=t.cfg,s=t.pages,i=t.tags;!n.keepTags&&function(){for(var t="",e=0,n="ul"===i[0].nodeName.toLowerCase()?"<li>":"<span>",a=n.replace("<","</");s>e;)t+=n+ ++e+a;i.html(t)}(),t.tags=i.children().removeClass(n.tagClass).each(function(t,n){e(n).data("i",t)})},bindTags:function(){var t,n,s,i=this,a=i.cfg,o=a.trigger,r="mouseenter"===o||"mouseover"===o;i.rewriteTags(),n=i.tags,r&&a.hoverDelay?(s=function(){var n=e(this);clearTimeout(t),t=setTimeout(function(){i.show(n.data("i"))},a.hoverDelay)},n.on("mouseleave",function(){clearTimeout(t)})):s=function(){i.show(e(this).data("i"))},n.on(o,s),!r&&n.has("a").on("click","a",function(t){e(this).parent().hasClass(a.tagClass)||t.preventDefault()})},bindBtns:function(){var t=this,n=t.old,s=t.cfg,i=s.btnClass,a=s.btnDisable,o=t.btnPrev,r=t.btnNext;o.on("click",function(){return(!a||!e(this).hasClass(i))&&t.prev(),!1}),r.on("click",function(){return(!a||!e(this).hasClass(i))&&t.next(),!1}),a&&(0===n?o.addClass(i):n===t.pages-1&&r.addClass(i))},bindAuto:function(){var t=this;t.ele.on({mouseenter:function(){t.pause()},mouseleave:function(){t.play()}})},prev:function(){var t=this.old-1;t=0>t?this.pages-1:t,this.show(t,"prev")},next:function(){var t=this.old+1;t=t>=this.pages?0:t,this.show(t,"next")},show:function(t,e){var s=this,i=s.old,a=s.cfg,o=a.btnClass,r=a.tagClass;i===t&&"must"!==e||s.isLocked||(a.beLock&&e!==n&&(s.isLocked=!0),a.btnDisable&&(s.btnPrev.toggleClass(o,0===t),s.btnNext.toggleClass(o,t===s.pages-1)),s.tags&&s.tags.eq(i).removeClass(r).end().eq(t).addClass(r),s.posCur&&s.posCur.html(t+1),a.lazyload&&s.loadImg(t),s.callback&&s.callback.call(s,t,i,e),s.process.call(s,t,i,e),s.old=t)},done:function(){var t=this,n=t.cfg;n.beLock&&(t.isLocked=!1),n.auto&&(t.tStartAuto=e.now(),t.auto())},lock:function(){this.isLocked=!0},unlock:function(){this.isLocked=!1,this.done()},pause:function(){this.isPaused=!0},play:function(){this.isPaused=!1,!this.isLocked&&this.auto(!0)},auto:function(t){var s=this,i=s.cfg.interval;clearTimeout(s.stopDoAuto),s.isPaused||(t&&s.tStartAuto!==n&&(i-=e.now()-s.tStartAuto),s.stopDoAuto=setTimeout(function(){!s.isPaused&&s.next()},i))},loadImg:function(t){var s=this,i=s.cfg;if(s.hasClone===n&&(s.hasClone=s.lists.first().prev().length>0,s.imgLoaded=" "),!(s.imgLoaded.indexOf(" "+t+" ")>=0)){s.imgLoaded+=t+" ";var a=i.imgAttr||"data-slide-img",r="["+a+"]",c=t*i.scrollLen,l=c+s.cansee,d=s.hasClone?s.parent.children(o(c,l)):n,u=s.lists.slice(c,l).add(d).find(r);s.doLoadImg(u,a),e.trim(s.imgLoaded).split(" ").length===s.pages&&(delete s.hasClone,delete s.imgLoaded,i.lazyload=!1)}},doLoadImg:function(t,e){t.each(function(t,n){var s=n.getAttribute(e);"img"===n.tagName.toLowerCase()?n.setAttribute("src",s):n.style.backgroundImage="url("+s+")",n.removeAttribute(e)})},bindTouch:function(){if("ontouchstart"in t){var e,n=this,s=n.ele,i=s[0],a=Math.floor(s.width()/4),o=0;a=a>80?80:a,i.addEventListener("touchstart",function(t){e=t.pageX}),i.addEventListener("touchmove",function(t){o=t.pageX-e,Math.abs(o)>20&&t.preventDefault()}),i.addEventListener("touchend",function(){Math.abs(o)>a&&(o>0?n.prev():n.next())})}}},t.Slider=a}(window,jQuery);